---
sudo: false
dist: trusty
language: java

jdk:
  - oraclejdk8

addons:
  apt:
    packages:
      - python3

services:
  - docker

env:
  global:
    - DOCKER_REPO=datawire/loom
    - secure: "Uqb0+1U8DFk41Jj+jvS0W+DHhH0qnbnl+mpeOjPRz5+nj4yXyKxcDHOWlNHTv0zhf/0Caf5ENtJh/tww1xy8OZZtof58WYVlMtmYPC+e0MmKLBLFrwfxY3fa2yYXohT+eXrzW/JPhrIqgbVAmlpNNDFbW4sBb/QNkVA7wukvvYEHi8wrUHx4LJIbzXfhT3o8BUUJobK+QYvRCmzgr9AtWhyn7F7myvC/jkli9C8b9/QKx+for0p6zxWK6l5QSxj1eoxRt8CGSkr0rbx6LC/5O81lpNIJSvS3F7vom1Qor4AlDHxxxtJJ3qe/Q6efIBFBsmabFb+KO33m+tpmCOaHvCaNEckDCd5/OFPz/h0eE84tJxUn5g/MU2bDWjA46PX2iyeITln+2YNofkbdbyOajE61EpYSny6LMyA5rIwqEjnNtB5rqhCNw7gj+xkDuZ3WuBT9CzXhTx+p6RTdroSusU/MFQhrwGMoB7Ef2aBWHuPNf0vconitn3OtwRm1DA1QpoAQ177DeeUgQ9/qf1fV5ilk/i+BamA59pVN0EMEGTn+MC0RYPwMlWfGnQmYmI9AcAycmneauEOfrg/sZDwgFWNCcsoN06+9hnY2Um2D7fb6nmjg1t2j/OdCjDKdX/nD6vA9MHPpB8TDUtvqIId7ZaXAnEb2wgRWC3qaudOrR+s="
    - secure: "F1Px9LWoNNwcwvOY9NqxoUuqnHQrx2lL5JeSk23WPXsEoLBruk3W3zaloPJ38ZpEZXvKMMgHpJLutMOWEArM3VDIWKkPnz4X9lRI/CRT93c9D8JXJW8nQ4GObdl2J9gFLCQXw2udWVJV+izb57PAe0chZ7ZyeRkkfjcGsVPY6jNim09M2wKisVsHSkq4gSe20Cx0XA/7ZGtqtxUKOzZjWIz2mXikJ8aDLqdJIcbbmqs9gAmYyK9iTFrelZVIx5klEYVoSk1mlLwdgKYPFfd+GpEE+mCOdE9Fmeq6gqcYDPh2Zl8HbkaMhG/UWzNIgZ6cKYsBEN8rlcGGcHVCzMJVJ6NKUu1VCK6fHp/g0z0J/XTGDGXcNP3pheiz+HI5IM5Z6f/XBvr9Fauih77MXcI1mxMdTk8D86wRHVXsjsThY0eeUFrTdyN8TEz/tOoM3Zaa9UQh1DdiZUJRIrDuqdWkkPS9B/PcFj4DvCc49VGGwxzWMLc5ZYRdRtmdAqwG/tVXXtWynFzp/WByLBJNBTI2hMoQZq4ZaPH8goiJjXNnHFoYl1eyHk6iP34/DjLiUqwUAZhzxMZrkxWBbOl1edZcWuMBJsCaXcU5ZmHcHdwJebmHkZuvsPp7+AYw/mrQRFFuhgfz3kbHQkkcYhMrMn3xqkBLbl9Tpx66JtxV2bDrDJs="
    - COMMIT=${TRAVIS_COMMIT::8}
    - PACKER_VERSION=1.0.0

before_script:
  - bash ci/travis_before_script.sh

script:
  - bash ci/travis_script.sh

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -rf $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/